TYPE=VIEW
query=select `ci`.`job_id` AS `job_id`,`oi`.`class_id` AS `class_id`,`oi`.`uid` AS `uid`,`cur`.`truename` AS `user_name`,`cur`.`phone` AS `baoming_phone`,(case when (`epi`.`status` = 1) then `epi`.`finished_at` else `oi`.`pay_refund_at` end) AS `datetime`,(case when (`epi`.`status` = 1) then cast(`epi`.`finished_at` as date) else cast(`oi`.`pay_refund_at` as date) end) AS `date`,(case when (`epi`.`status` = 1) then 1 else 2 end) AS `bill_type`,(case when (`epi`.`status` = 1) then (`oi`.`pay_period` + 10) else 21 end) AS `bill_detail_type`,(case when (`oi`.`money` > 0) then `oi`.`money` else 0 end) AS `money`,`epi`.`order_num` AS `order_num`,`epi`.`pay_no` AS `pay_no`,`epi`.`buyer_email` AS `buyer_email`,`epi`.`bank_code` AS `bank_code`,`epi`.`bank_no` AS `bank_no`,1 AS `origin_type`,`oi`.`id` AS `origin_id` from (((`jkxy_jiuye_v1`.`jkxy_jiuye_order_info` `oi` join `jkxy_jiuye_v1`.`jkxy_jiuye_extranet_pay_info` `epi` on((`oi`.`id` = `epi`.`order_id`))) join `jkxy_jiuye_v1`.`jkxy_jiuye_class_info` `ci` on((`oi`.`class_id` = `ci`.`id`))) join `jkxy_jiuye_v1`.`jkxy_jiuye_class_user_relation` `cur` on((`oi`.`enroll_id` = `cur`.`id`))) where ((`oi`.`status` in (1,-(98),-(99))) and (`oi`.`is_delete` = 0) and (`epi`.`status` in (1,4)) and (`epi`.`is_delete` = 0)) union all select `ci`.`job_id` AS `job_id`,`oi`.`class_id` AS `class_id`,`oi`.`uid` AS `uid`,`cur`.`truename` AS `user_name`,`cur`.`phone` AS `baoming_phone`,`epi`.`finished_at` AS `datetime`,cast(`epi`.`finished_at` as date) AS `date`,1 AS `bill_type`,(`oi`.`pay_period` + 10) AS `bill_detail_type`,(case when (`oi`.`money` > 0) then `oi`.`money` else 0 end) AS `money`,`epi`.`order_num` AS `order_num`,`epi`.`pay_no` AS `pay_no`,`epi`.`buyer_email` AS `buyer_email`,`epi`.`bank_code` AS `bank_code`,`epi`.`bank_no` AS `bank_no`,1 AS `origin_type`,`oi`.`id` AS `origin_id` from (((`jkxy_jiuye_v1`.`jkxy_jiuye_order_info` `oi` join `jkxy_jiuye_v1`.`jkxy_jiuye_extranet_pay_info` `epi` on((`oi`.`id` = `epi`.`order_id`))) join `jkxy_jiuye_v1`.`jkxy_jiuye_class_info` `ci` on((`oi`.`class_id` = `ci`.`id`))) join `jkxy_jiuye_v1`.`jkxy_jiuye_class_user_relation` `cur` on((`oi`.`enroll_id` = `cur`.`id`))) where ((`oi`.`status` in (1,-(98),-(99))) and (`oi`.`is_delete` = 0) and (`epi`.`status` = 4) and (`epi`.`is_delete` = 0)) union all select NULL AS `job_id`,NULL AS `class_id`,`rhh`.`teacher_uid` AS `uid`,`admin`.`name` AS `user_name`,NULL AS `baoming_phone`,`rhh`.`finish_at` AS `datetime`,cast(`rhh`.`finish_at` as date) AS `date`,2 AS `bill_type`,22 AS `bill_detail_type`,`rhh`.`money` AS `money`,NULL AS `order_num`,`rhh`.`ali_order` AS `pay_no`,`rhh`.`ali_account` AS `buyer_email`,NULL AS `bank_code`,NULL AS `bank_no`,2 AS `origin_type`,`rhh`.`id` AS `origin_id` from (`jkxy_jiuye_v1`.`jkxy_jiuye_rob_homework_history` `rhh` left join `jkxy_jiuye_v1`.`jkxy_jiuye_admin` `admin` on((`rhh`.`teacher_uid` = `admin`.`id`))) where ((`rhh`.`status` = 3) and (`rhh`.`is_delete` = 0))
md5=3e34e7c840f0f2f1e5f70eb1226830f3
updatable=0
algorithm=0
definer_user=root
definer_host=%
suid=1
with_check_option=0
timestamp=2017-04-21 05:53:39
create-version=1
source=select `ci`.`job_id` AS `job_id`,`oi`.`class_id` AS `class_id`,`oi`.`uid` AS `uid`,`cur`.`truename` AS `user_name`,`cur`.`phone` AS `baoming_phone`,(case when (`epi`.`status` = 1) then `epi`.`finished_at` else `oi`.`pay_refund_at` end) AS `datetime`,(case when (`epi`.`status` = 1) then cast(`epi`.`finished_at` as date) else cast(`oi`.`pay_refund_at` as date) end) AS `date`,(case when (`epi`.`status` = 1) then 1 else 2 end) AS `bill_type`,(case when (`epi`.`status` = 1) then (`oi`.`pay_period` + 10) else 21 end) AS `bill_detail_type`,(case when (`oi`.`money` > 0) then `oi`.`money` else 0 end) AS `money`,`epi`.`order_num` AS `order_num`,`epi`.`pay_no` AS `pay_no`,`epi`.`buyer_email` AS `buyer_email`,`epi`.`bank_code` AS `bank_code`,`epi`.`bank_no` AS `bank_no`,1 AS `origin_type`,`oi`.`id` AS `origin_id` from (((`jkxy_jiuye_order_info` `oi` join `jkxy_jiuye_extranet_pay_info` `epi` on((`oi`.`id` = `epi`.`order_id`))) join `jkxy_jiuye_class_info` `ci` on((`oi`.`class_id` = `ci`.`id`))) join `jkxy_jiuye_class_user_relation` `cur` on((`oi`.`enroll_id` = `cur`.`id`))) where ((`oi`.`status` in (1,-(98),-(99))) and (`oi`.`is_delete` = 0) and (`epi`.`status` in (1,4)) and (`epi`.`is_delete` = 0)) union all select `ci`.`job_id` AS `job_id`,`oi`.`class_id` AS `class_id`,`oi`.`uid` AS `uid`,`cur`.`truename` AS `user_name`,`cur`.`phone` AS `baoming_phone`,`epi`.`finished_at` AS `datetime`,cast(`epi`.`finished_at` as date) AS `date`,1 AS `bill_type`,(`oi`.`pay_period` + 10) AS `bill_detail_type`,(case when (`oi`.`money` > 0) then `oi`.`money` else 0 end) AS `money`,`epi`.`order_num` AS `order_num`,`epi`.`pay_no` AS `pay_no`,`epi`.`buyer_email` AS `buyer_email`,`epi`.`bank_code` AS `bank_code`,`epi`.`bank_no` AS `bank_no`,1 AS `origin_type`,`oi`.`id` AS `origin_id` from (((`jkxy_jiuye_order_info` `oi` join `jkxy_jiuye_extranet_pay_info` `epi` on((`oi`.`id` = `epi`.`order_id`))) join `jkxy_jiuye_class_info` `ci` on((`oi`.`class_id` = `ci`.`id`))) join `jkxy_jiuye_class_user_relation` `cur` on((`oi`.`enroll_id` = `cur`.`id`))) where ((`oi`.`status` in (1,-(98),-(99))) and (`oi`.`is_delete` = 0) and (`epi`.`status` = 4) and (`epi`.`is_delete` = 0)) union all select NULL AS `job_id`,NULL AS `class_id`,`rhh`.`teacher_uid` AS `uid`,`admin`.`name` AS `user_name`,NULL AS `baoming_phone`,`rhh`.`finish_at` AS `datetime`,cast(`rhh`.`finish_at` as date) AS `date`,2 AS `bill_type`,22 AS `bill_detail_type`,`rhh`.`money` AS `money`,NULL AS `order_num`,`rhh`.`ali_order` AS `pay_no`,`rhh`.`ali_account` AS `buyer_email`,NULL AS `bank_code`,NULL AS `bank_no`,2 AS `origin_type`,`rhh`.`id` AS `origin_id` from (`jkxy_jiuye_rob_homework_history` `rhh` left join `jkxy_jiuye_admin` `admin` on((`rhh`.`teacher_uid` = `admin`.`id`))) where ((`rhh`.`status` = 3) and (`rhh`.`is_delete` = 0))
client_cs_name=utf8
connection_cl_name=utf8_general_ci
view_body_utf8=select `ci`.`job_id` AS `job_id`,`oi`.`class_id` AS `class_id`,`oi`.`uid` AS `uid`,`cur`.`truename` AS `user_name`,`cur`.`phone` AS `baoming_phone`,(case when (`epi`.`status` = 1) then `epi`.`finished_at` else `oi`.`pay_refund_at` end) AS `datetime`,(case when (`epi`.`status` = 1) then cast(`epi`.`finished_at` as date) else cast(`oi`.`pay_refund_at` as date) end) AS `date`,(case when (`epi`.`status` = 1) then 1 else 2 end) AS `bill_type`,(case when (`epi`.`status` = 1) then (`oi`.`pay_period` + 10) else 21 end) AS `bill_detail_type`,(case when (`oi`.`money` > 0) then `oi`.`money` else 0 end) AS `money`,`epi`.`order_num` AS `order_num`,`epi`.`pay_no` AS `pay_no`,`epi`.`buyer_email` AS `buyer_email`,`epi`.`bank_code` AS `bank_code`,`epi`.`bank_no` AS `bank_no`,1 AS `origin_type`,`oi`.`id` AS `origin_id` from (((`jkxy_jiuye_v1`.`jkxy_jiuye_order_info` `oi` join `jkxy_jiuye_v1`.`jkxy_jiuye_extranet_pay_info` `epi` on((`oi`.`id` = `epi`.`order_id`))) join `jkxy_jiuye_v1`.`jkxy_jiuye_class_info` `ci` on((`oi`.`class_id` = `ci`.`id`))) join `jkxy_jiuye_v1`.`jkxy_jiuye_class_user_relation` `cur` on((`oi`.`enroll_id` = `cur`.`id`))) where ((`oi`.`status` in (1,-(98),-(99))) and (`oi`.`is_delete` = 0) and (`epi`.`status` in (1,4)) and (`epi`.`is_delete` = 0)) union all select `ci`.`job_id` AS `job_id`,`oi`.`class_id` AS `class_id`,`oi`.`uid` AS `uid`,`cur`.`truename` AS `user_name`,`cur`.`phone` AS `baoming_phone`,`epi`.`finished_at` AS `datetime`,cast(`epi`.`finished_at` as date) AS `date`,1 AS `bill_type`,(`oi`.`pay_period` + 10) AS `bill_detail_type`,(case when (`oi`.`money` > 0) then `oi`.`money` else 0 end) AS `money`,`epi`.`order_num` AS `order_num`,`epi`.`pay_no` AS `pay_no`,`epi`.`buyer_email` AS `buyer_email`,`epi`.`bank_code` AS `bank_code`,`epi`.`bank_no` AS `bank_no`,1 AS `origin_type`,`oi`.`id` AS `origin_id` from (((`jkxy_jiuye_v1`.`jkxy_jiuye_order_info` `oi` join `jkxy_jiuye_v1`.`jkxy_jiuye_extranet_pay_info` `epi` on((`oi`.`id` = `epi`.`order_id`))) join `jkxy_jiuye_v1`.`jkxy_jiuye_class_info` `ci` on((`oi`.`class_id` = `ci`.`id`))) join `jkxy_jiuye_v1`.`jkxy_jiuye_class_user_relation` `cur` on((`oi`.`enroll_id` = `cur`.`id`))) where ((`oi`.`status` in (1,-(98),-(99))) and (`oi`.`is_delete` = 0) and (`epi`.`status` = 4) and (`epi`.`is_delete` = 0)) union all select NULL AS `job_id`,NULL AS `class_id`,`rhh`.`teacher_uid` AS `uid`,`admin`.`name` AS `user_name`,NULL AS `baoming_phone`,`rhh`.`finish_at` AS `datetime`,cast(`rhh`.`finish_at` as date) AS `date`,2 AS `bill_type`,22 AS `bill_detail_type`,`rhh`.`money` AS `money`,NULL AS `order_num`,`rhh`.`ali_order` AS `pay_no`,`rhh`.`ali_account` AS `buyer_email`,NULL AS `bank_code`,NULL AS `bank_no`,2 AS `origin_type`,`rhh`.`id` AS `origin_id` from (`jkxy_jiuye_v1`.`jkxy_jiuye_rob_homework_history` `rhh` left join `jkxy_jiuye_v1`.`jkxy_jiuye_admin` `admin` on((`rhh`.`teacher_uid` = `admin`.`id`))) where ((`rhh`.`status` = 3) and (`rhh`.`is_delete` = 0))
